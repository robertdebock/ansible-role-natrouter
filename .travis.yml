---
#
# Ansible managed
#
language: python

python:
  - "3.8"

services:
  - docker

env:
  global:
    namespace="robertdebock"
  matrix:
    - image="alpine" tag="latest"
    - image="alpine" tag="edge"
    - image="centos" tag="7"
    - image="centos" tag="latest"
    - image="debian" tag="latest"
    - image="debian" tag="bullseye"
    - image="fedora" tag="31"
    - image="fedora" tag="latest"
    - image="opensuse" tag="latest"
    - image="ubuntu" tag="latest"
    - image="ubuntu" tag="bionic"
    - image="ubuntu" tag="xenial"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - function retry { counter=0 ; until "$@" ; do exit=$? ; counter=$(($counter + 1)) ; if [ $counter -ge 3 ] ; then return $exit ; fi ; done ; return 0; } ; retry tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack: "h/DEJLAsmDJBig0tqssYWPb+9EJvReV9uBxGOsRRPoMoBZc9FR7m+ZwKG/XzuNMGBIhYps7DboJVrFAqYqq4qAQW794DwSmdW/kZfXuc3XkXnj+fdylj/0HZWpHpvYuz1HP9YMpkN/pe/XyOPbRPeRkXhyeJQ1I81VaZtPd9DgtTOF9KPrAcMgVoAkWuIqKgO2IOH4+x5F//HPi0Q1Sxkpmeb8xdFkDeN2mlXFpUMBy9JHG2lLCj37mzdmCRsRCBrOPtzu3H+CBZruvUy/LPvjG4Kg2G25f20l64c4t8/pf/GJ5I5Y+lloKxhZd8diErqF6PF8u0npGi32g/RRBj8BuCEfpeNXnzr/iwv5HylCVL/st8geqp9Moqf9GCVIbOkfclootT4wttjcpR5KYuu8IYXFYKJNNah3L/oLa816EFXc/RBKb6WzfstUiBaW0nuMLmODGs5TAwmqgAJwaBUMzys8hhhI/vchMo8AZ1NJs2lev2g76fjsSpkDnSuK71XsCGKITQ5ZJF2Ts6dX79gthU6mOoORavhzAOruj1HKwdgOc11fN8tk/fHDrQ8z+X40bzn/qaQo8wJtVJ5BDZf/CDPUF9/YNX22jIlLI25yh02PBuY306HEoKY+mfzY5qkSB3bYDWS1Cb8neRL1u0rkalO5tVa8Z2f3792TovMM0="
  email: false
